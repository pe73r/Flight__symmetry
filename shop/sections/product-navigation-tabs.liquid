{% if section.settings.display %}
<section class="{% if section.settings.container_type == 'padding-medium'%} padding-medium{% elsif section.settings.container_type == 'padding-large'%} padding-large {% else %} padding-small{% endif %}">
    <div class="container-medium">
      {% assign productDescription = product.description | split:"<!-- split -->"%}
      <div class='toggle'> 
        <div class='tabs'>
        {% for block in section.blocks %}
          <div class='tab {% if forloop.first %} active {% endif %}'>{{ block.settings.title }}</div>
        {% endfor %}
        </div>
        <div class='panels'>
        {% for block in section.blocks %}
        {% if block.type == 'description' %} 
          <div class='panel'>
              <!-- {{ productDescription | first }} -->
             {{ product.metafields.product.description_legende }}</p> 
          </div> 
        {% elsif block.type == 'features' %}   
           <div class='panel'>
               <!-- {{ productDescription[1] }} -->
              {{ product.metafields.product.description_avion }}
           </div> 
        {% elsif block.type == 'designer' %}    
           <div class='panel'> 
               <!-- {{ productDescription | last }} -->
               <div class="grid">
                 <div class="1/4--lap-and-up grid__cell">
                    <img src="{{ product.metafields.product.image_1 }}" alt=""> 
                 </div>  
                 <div class="1/4--lap-and-up grid__cell">
                    <img src="{{ product.metafields.product.image_2 }}" alt=""> 
                 </div> 
                 <div class="1/4--lap-and-up grid__cell">
                    <img src="{{ product.metafields.product.image_3 }}" alt=""> 
                 </div>
                 <div class="1/4--lap-and-up grid__cell">
                    <img src="{{ product.metafields.product.image_4 }}" alt=""> 
                 </div>  
                 <div class="1/4--lap-and-up grid__cell">
                    <img src="{{ product.metafields.product.image_5 }}" alt=""> 
                 </div> 
                 <div class="1/4--lap-and-up grid__cell">
                    <img src="{{ product.metafields.product.image_6 }}" alt=""> 
                 </div>  
                 <div class="1/4--lap-and-up grid__cell">
                    <img src="{{ product.metafields.product.image_7 }}" alt=""> 
                 </div>   
                 <div class="1/4--lap-and-up grid__cell">
                    <img src="{{ product.metafields.product.image_8 }}" alt=""> 
                 </div>   
              </div>
            </div> 
        {% endif %}
        {% endfor %}
        </div>
    </div> 
  </div>
</section>
<script>

(function() {
  $(function() {
    var toggle;
    return toggle = new Toggle('.toggle');
  });

  this.Toggle = (function() {
    Toggle.prototype.el = null;

    Toggle.prototype.tabs = null;

    Toggle.prototype.panels = null;

    function Toggle(toggleClass) {
      this.el = $(toggleClass);
      this.tabs = this.el.find(".tab");
      this.panels = this.el.find(".panel");
      this.bind();
    }

    Toggle.prototype.show = function(index) {
      var activePanel, activeTab;
      this.tabs.removeClass('active');
      activeTab = this.tabs.get(index);
      $(activeTab).addClass('active');
      this.panels.hide();
      activePanel = this.panels.get(index);
      return $(activePanel).show();
    };

    Toggle.prototype.bind = function() {
      var _this = this;
      return this.tabs.unbind('click').bind('click', function(e) {
        return _this.show($(e.currentTarget).index());
      });
    };

    return Toggle;

  })();

}).call(this);

</script>


{% endif %}

{% schema %}
     {
       "name": "Product tabs",
       "settings": [ 
          {
              "type": "checkbox",
              "id": "display",
              "label": "Display section ?",
              "default": true
          }, 
          {
           "type":      "select",
           "id":        "container_type",
           "label":     "Container type",
            "options": [
                 {
                   "value": "padding-small",
                   "label": "padding-small"
                 },
                 {
                    "value": "padding-medium",
                    "label": "padding-medium"
                 }, 
                 {
                   "value": "padding-large",
                   "label": "padding-large"
                 } 
               ],
               "default":   "padding-small", 
               "info":      "Spacing for the section"
            } 
       ],
       "blocks": [
              {
               "type": "description",
               "name": "Description",
               "limit": 1,
               "settings": [
                    {
                        "type": "text",
                        "id": "title",
                        "label": "Title",
                        "default": "Description"
                    },
                    {
                        "type":      "paragraph",
                        "content":   "Content comes from first part of product description"
                     }
               ]
             },
             {
                "type": "features",
                "name": "Features", 
                "limit": 1,
                "settings": [
                     {
                         "type": "text",
                         "id": "title",
                         "label": "Title",
                         "default": "Features" 
                     },
                     {
                         "type":      "paragraph",
                         "content":   "Content comes from second part of product description"
                      } 
                ]
              },   
              {
                "type": "designer",
                "name": "Designer",
                "limit": 1,
                "settings": [
                     {
                         "type": "text",
                         "id": "title",
                         "label": "Title",
                         "default": "Designer"
                     }, 
                     {
                         "type":      "paragraph",
                         "content":   "Content comes from second part of product description"
                      }
                ]
              }
              
       ]
     }
     {% endschema %}
     